
matrix:
  include:
    - language: nix
      os: linux
      dist: xenial
      compiler: gcc
      sudo: required
      script: 
        - nix-shell -A test shell.nix --run 'mkdir -p build && cd build && cmake .. && make && export PATH=$PATH:$(pwd) && cd .. && py.test'

    - language: cpp
      os: linux
      dist: trusty
      compiler: gcc
      sudo: required
      addons:
       apt:
         packages:
           - cmake
           - g++
           - python3
           - python3-pytest
      install:
        mkdir -p build && cd build && cmake .. && make && sudo make install && cd ..

script:
    - echo $(pwd) && py.test-3
    - echo $(pwd) && py.test-3
